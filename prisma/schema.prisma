generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Role {
  ADMIN
  MOD
  USER
}

enum Status {
  ACTIVE
  TERMINATED
}

model User {
  id                                String       @id @default(uuid())
  username                          String       @unique @db.VarChar(15)
  email                             String       @unique @db.VarChar(345)
  password                          String?       @db.VarChar(60)
  profilePictureUrl                 String?
  profilePictureKey                 String?
  reputationPoints                  Int          @default(0)
  role                              Role         @default(USER)
  questionsAsked                    Int          @default(0)
  answersGiven                      Int          @default(0)
  bestAnswers                       Int          @default(0)
  achievments                       Achievment[]
  status                            Status       @default(ACTIVE)
  otp                               String?      @db.Char(6)
  otpResendAvailableAt              DateTime?
  otpExpireAt                       DateTime?
  resetPasswordOtp                  String?      @db.Char(6)
  resetPasswordOtpResendAvailableAt DateTime?
  resetPasswordOtpExpireAt          DateTime?
  isVerified                        Boolean      @default(false)
  createdAt                         DateTime     @default(now())
}

model Achievment {
  id          String   @id @default(uuid())
  user        User     @relation(fields: [userId], references: [id])
  userId      String
  name        String   @db.VarChar(15)
  description String   @db.VarChar(100)
  createdAt   DateTime @default(now())
}
